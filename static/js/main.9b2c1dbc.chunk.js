(this["webpackJsonptopsis-react"]=this["webpackJsonptopsis-react"]||[]).push([[0],{109:function(e,t){},157:function(e,t){},158:function(e,t){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(13),r=a.n(i),c=a(222),s=a(227),o=a(226),l=a(225),d=a(223),u=a(165),b=a(228),j=a(16),m=a(15),h=a(7),f=a(230),O=a(224),p=a(229),x=a(44),g=a(215),v=a(219),y=a(218),w=a(212),N=a(216),S=a(217),C=a(92),R=a(6);function k(e){return Object(R.jsx)(w.a,{component:C.a,children:Object(R.jsxs)(g.a,{"aria-label":"a dense table",children:[Object(R.jsx)(N.a,{children:Object(R.jsx)(S.a,{children:[{name:"Crit\xe9rio",attribute:"criterionName"},{name:"Tipo",attribute:"type"},{name:"Peso (%)",attribute:"weight"},{name:"Remover"}].map((function(e,t){return 0==t?Object(R.jsx)(y.a,{children:e.name},e.name):Object(R.jsx)(y.a,{align:"center",children:e.name},e.name)}))})}),Object(R.jsx)(v.a,{children:e.rows.map((function(t,a){return Object(R.jsxs)(S.a,{children:[Object(R.jsx)(y.a,{component:"th",scope:"row",children:t.criterionName}),Object(R.jsx)(y.a,{align:"center",children:1==t.type?"Custo":"Benef\xedcio"}),Object(R.jsx)(y.a,{align:"center",children:t.weight}),Object(R.jsx)(y.a,{align:"center",children:Object(R.jsx)(x.a,{variant:"contained",color:"secondary",onClick:function(){return e.removeRow(a)},children:" Remover"})})]},t.criterionName)}))})]})})}var q=a(27),A=a(127),F=a(59),M=a(96),G=a(39),B=a(97),I=a(25),D=Object(I.a)((function(e){return{formControl:{margin:e.spacing(0,1),minWidth:150},button:{margin:e.spacing(1,0)},form:{margin:e.spacing(2,0)}}}));function T(e){var t={criterionName:"",weight:0,type:1},a=D(),i=Object(n.useState)(t),r=Object(h.a)(i,2),c=r[0],s=r[1],o=function(e){var t=e.target,a=t.name,n=t.value;s(Object(m.a)(Object(m.a)({},c),{},Object(q.a)({},a,n)))},l=c.criterionName,d=c.weight,u=c.type;return Object(R.jsxs)("form",{disabled:!0,className:a.form,onSubmit:function(a){a.preventDefault(),e.handleSubmit(c),s(t)},children:[Object(R.jsxs)(b.a,{display:"flex",flexDirection:"row",children:[Object(R.jsx)(A.a,{disabled:e.disabled,required:!0,name:"criterionName",className:a.input,label:"Crit\xe9rio",variant:"filled",value:l,onChange:o}),Object(R.jsxs)(F.a,{disabled:e.disabled,required:!0,className:a.formControl,variant:"filled",children:[Object(R.jsx)(B.a,{id:"label-type",children:"Tipo"}),Object(R.jsxs)(M.a,{labelId:"label-type",name:"type",value:u,onChange:o,children:[Object(R.jsx)(G.a,{value:1,children:"Custo"}),Object(R.jsx)(G.a,{value:2,children:"Benef\xedcio"})]})]}),Object(R.jsx)(A.a,{disabled:e.disabled,required:!0,className:a.input,type:"number",name:"weight",label:"Peso (%)",variant:"filled",value:d,onChange:o})]}),Object(R.jsx)(x.a,{disabled:e.disabled,className:a.button,type:"submit",variant:"contained",color:"primary",children:" Adicionar "})]})}var P=a(114);function W(e){return Object(R.jsx)("div",{style:{width:"100%",height:300},children:Object(R.jsx)(P.a,{rows:e.dataset,columns:e.columns,pageSize:5,loading:e.loading})})}var E=Object(I.a)((function(e){return{formControl:{margin:e.spacing(0,1),minWidth:150},input:{minWidth:100,margin:e.spacing(0,1)},button:{margin:e.spacing(1,1,1,0)},form:{margin:e.spacing(2,0)}}})),z=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(e){return"."+e})).join(",");function J(e){var t={name:""};e.fields.forEach((function(e){t[e]=""}));var a=E(),i=Object(n.useState)(t),r=Object(h.a)(i,2),c=r[0],s=r[1],o=function(t){var a=t.target,n=a.name,i=a.value;if("file-input"===n){var r=t.target.files;r&&r[0]&&e.handleFile(r[0])}else s(Object(m.a)(Object(m.a)({},c),{},Object(q.a)({},n,i)))};return Object(R.jsxs)("form",{className:a.form,onSubmit:function(a){a.preventDefault(),e.handleSubmit(c),s(t)},children:[Object(R.jsxs)(b.a,{display:"flex",flexDirection:"row",children:[Object(R.jsx)(A.a,{disabled:e.disabled,required:!0,name:"name",label:"Nome",variant:"filled",value:c.name,onChange:o}),e.fields.map((function(t,n){return Object(R.jsx)(A.a,{disabled:e.disabled,required:!0,className:a.input,type:"number",name:t,label:t,variant:"filled",value:c[t],onChange:o},n)}))]}),Object(R.jsx)(x.a,{disabled:e.disabled,className:a.button,type:"submit",variant:"contained",color:"primary",children:" Adicionar "}),Object(R.jsx)("input",{className:a.input,style:{display:"none"},type:"file",id:"raised-button-file",name:"file-input",accept:z,onChange:o}),Object(R.jsx)("label",{htmlFor:"raised-button-file",children:Object(R.jsx)(x.a,{disabled:e.disabled,variant:"contained",component:"span",color:"secondary",className:a.button,children:"Carregar"})})]})}var _=a(116);function U(e,t){var a,n=t.map((function(e){return e.weight})),i=function(e){return e.reduce((function(e,t){return t+e}))},r=e.map((function(t){return t.map((function(t,a){return t/Math.sqrt(function(t){return i(e.map((function(e){return Math.pow(e[t],2)})))}(a))}))})).map((function(e){return e.map((function(e,t){return n[t]*e}))})),c=[],s=[],o=Object(_.a)(t);try{var l=function(){var e=a.value,n=r.map((function(a){return a[t.indexOf(e)]})),i=Math.min.apply(Math,Object(j.a)(n)),o=Math.max.apply(Math,Object(j.a)(n));c.push(1===e.type?i:o),s.push(1===e.type?o:i)};for(o.s();!(a=o.n()).done;)l()}catch(b){o.e(b)}finally{o.f()}var d=r.map((function(e){return Math.sqrt(i(e.map((function(e,t){return Math.pow(c[t]-e,2)}))))})),u=r.map((function(e){return Math.sqrt(i(e.map((function(e,t){return Math.pow(s[t]-e,2)}))))})).map((function(e,t){return e/(d[t]+e)}));return Object(j.a)(u).sort().reverse().map((function(e){return u.indexOf(e)}))}var V=[{field:"ranking",headerName:"#",type:"number",width:60},{field:"name",headerName:"Nome",width:160}];function H(e){var t=Object(n.useState)(!0),a=Object(h.a)(t,2),i=a[0],r=a[1],c=Object(n.useState)([]),s=Object(h.a)(c,2),o=s[0],l=s[1];return Object(n.useEffect)((function(){var t=e.criteria.map((function(e){return{name:e.criterionName,type:e.type,weight:parseFloat(e.weight/100)}})),a=U(e.dataset.map((function(e){return Object(j.a)(t.map((function(t){return e[t.name]})))})),t);setTimeout((function(){l(a.map((function(t,a){return{id:a,name:e.dataset[t].name,ranking:a+1}}))),r(!1)}),1e3)}),[]),Object(R.jsx)(W,{loading:i,dataset:o,columns:V})}var K=a(90),L=a.n(K);var Q=Object(I.a)((function(e){return{root:{margin:e.spacing(6,0,3),width:"100%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));function X(e){var t=Q(),a=Object(n.useState)({criteria:[],sum:0,disabledForm:!1,disableGrid:!0,disableResults:!0,dataset:[],loading:!1}),i=Object(h.a)(a,2),r=i[0],c=i[1],s=Object(n.useState)(0),o=Object(h.a)(s,2),l=o[0],d=o[1],g=["Insira os crit\xe9rios","Insira as alternativas","Veja o resultado"],v=function(e){var t=r.sum+parseInt(e.weight);c(Object(m.a)(Object(m.a)({},r),{},{criteria:[].concat(Object(j.a)(r.criteria),[Object(m.a)(Object(m.a)({},e),{},{weight:parseInt(e.weight)})]),sum:t,disabledForm:t>=100,disableGrid:!1}))},y=function(e,t){var a=Object(m.a)({},e);return a.name=a.Nome,delete a.Nome,Object(m.a)(Object(m.a)({},a),{},{name:a.name,id:t+r.dataset.length})},w=function(e){c(Object(m.a)(Object(m.a)({},r),{},{dataset:[].concat(Object(j.a)(r.dataset),[Object(m.a)(Object(m.a)({},e),{},{id:r.dataset.length})]),disableResults:!1}))},N=function(e){c(Object(m.a)(Object(m.a)({},r),{},{loading:!0}));var t=new FileReader,a=!!t.readAsBinaryString;t.onload=function(e){var t=e.target.result,n=L.a.read(t,{type:a?"binary":"array"}),i=n.SheetNames[0],s=n.Sheets[i],o=L.a.utils.sheet_to_json(s,{header:0});console.log(o.map(y)),c(Object(m.a)(Object(m.a)({},r),{},{dataset:o.map(y),disableResults:!1,loading:!1}))},a?t.readAsBinaryString(e):t.readAsArrayBuffer(e)};var S=function(e){var t=r.sum-parseInt(r.criteria[e].weight);c(Object(m.a)(Object(m.a)({},r),{},{criteria:Object(j.a)(r.criteria.filter((function(t,a){return a!==e}))),sum:t,disabledForm:t>=100,disableGrid:0===t}))};return Object(R.jsxs)(b.a,{className:t.root,children:[Object(R.jsx)(f.a,{activeStep:l,children:g.map((function(e,t){return Object(R.jsx)(O.a,Object(m.a)(Object(m.a)({},{}),{},{children:Object(R.jsx)(p.a,Object(m.a)(Object(m.a)({},{}),{},{children:e}))}),e)}))}),l===g.length?Object(R.jsxs)("div",{children:[Object(R.jsx)(u.a,{className:t.instructions,children:"Todas as etapas completadas"}),Object(R.jsx)(x.a,{onClick:function(){d(0)},className:t.button,children:"Reset"})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{children:function(e){switch(e){case 0:return Object(R.jsxs)(b.a,{children:[Object(R.jsx)(k,{rows:r.criteria,removeRow:S}),Object(R.jsx)(T,{disabled:r.disabledForm,handleSubmit:v})]});case 1:return Object(R.jsxs)(b.a,{children:[Object(R.jsx)(W,{dataset:r.dataset,disable:r.disableGrid,columns:(t=r.criteria,[{field:"name",headerName:"Nome",width:200}].concat(Object(j.a)(t.map((function(e){return{field:e.criterionName,headerName:[].concat(Object(j.a)(e.criterionName[0].toUpperCase()),[e.criterionName.slice(1)]),type:"number",width:160}}))))),loading:r.loading}),Object(R.jsx)(J,{fields:r.criteria.map((function(e){return e.criterionName})),disabled:r.disableGrid,handleSubmit:w,handleFile:N})]});case 2:return Object(R.jsx)(b.a,{children:Object(R.jsx)(H,{dataset:r.dataset,disable:r.disableResults,criteria:r.criteria})});default:return Object(R.jsx)(u.a,{children:"Etapa desconhecida"})}var t}(l)}),Object(R.jsxs)("div",{children:[Object(R.jsx)(x.a,{disabled:0===l,onClick:function(){d((function(e){return e-1}))},className:t.button,children:"Back"}),Object(R.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){d((function(e){return e+1}))},disabled:0==l&&r.disableGrid||1==l&&r.disableResults,className:t.button,children:l===g.length-1?"Finalizar":"Pr\xf3ximo"})]})]})]})}var Y=Object(I.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1,textAlign:"center"}}}));var Z=function(){var e=Y();return Object(R.jsxs)(b.a,{className:e.root,children:[Object(R.jsx)(l.a,{position:"static",children:Object(R.jsx)(d.a,{children:Object(R.jsx)(u.a,{variant:"h6",className:e.title,component:"h1",children:"TOPSIS React"})})}),Object(R.jsx)(o.a,{maxWidth:"md",children:Object(R.jsx)(X,{})})]})},$=a(80),ee=a(46),te=Object(ee.a)({palette:{primary:{main:"#2364AA"},secondary:{main:"#3DA5D9"},error:{main:$.a.A400},background:{default:"#fff"}}});r.a.render(Object(R.jsxs)(c.a,{theme:te,children:[Object(R.jsx)(s.a,{}),Object(R.jsx)(Z,{})]}),document.querySelector("#root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.9b2c1dbc.chunk.js.map