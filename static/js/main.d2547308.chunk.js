(this["webpackJsonptopsis-react"]=this["webpackJsonptopsis-react"]||[]).push([[0],{108:function(e,a){},156:function(e,a){},157:function(e,a){},158:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t(13),r=t.n(i),c=t(221),s=t(224),l=t(223),o=t(164),d=t(225),u=t(16),b=t(15),j=t(7),m=t(227),h=t(222),f=t(226),O=t(44),p=t(214),x=t(218),g=t(217),v=t(211),y=t(215),w=t(216),N=t(120),C=t(6);function S(e){return Object(C.jsx)(v.a,{component:N.a,children:Object(C.jsxs)(p.a,{"aria-label":"a dense table",children:[Object(C.jsx)(y.a,{children:Object(C.jsx)(w.a,{children:[{name:"Crit\xe9rio",attribute:"criterionName"},{name:"Tipo",attribute:"type"},{name:"Peso (%)",attribute:"weight"},{name:"Remover"}].map((function(e,a){return 0==a?Object(C.jsx)(g.a,{children:e.name},e.name):Object(C.jsx)(g.a,{align:"center",children:e.name},e.name)}))})}),Object(C.jsx)(x.a,{children:e.rows.map((function(a,t){return Object(C.jsxs)(w.a,{children:[Object(C.jsx)(g.a,{component:"th",scope:"row",children:a.criterionName}),Object(C.jsx)(g.a,{align:"center",children:1==a.type?"Custo":"Benef\xedcio"}),Object(C.jsx)(g.a,{align:"center",children:a.weight}),Object(C.jsx)(g.a,{align:"center",children:Object(C.jsx)(O.a,{variant:"contained",color:"secondary",onClick:function(){return e.removeRow(t)},children:" Remover"})})]},a.criterionName)}))})]})})}var k=t(26),R=t(127),q=t(59),A=t(95),F=t(39),M=t(96),B=t(25),I=Object(B.a)((function(e){return{formControl:{margin:e.spacing(0,1),minWidth:150},button:{margin:e.spacing(1,0)},form:{margin:e.spacing(2,0)}}}));function D(e){var a={criterionName:"",weight:0,type:1},t=I(),i=Object(n.useState)(a),r=Object(j.a)(i,2),c=r[0],s=r[1],l=function(e){var a=e.target,t=a.name,n=a.value;s(Object(b.a)(Object(b.a)({},c),{},Object(k.a)({},t,n)))},o=c.criterionName,u=c.weight,m=c.type;return Object(C.jsxs)("form",{disabled:!0,className:t.form,children:[Object(C.jsxs)(d.a,{display:"flex",flexDirection:"row",children:[Object(C.jsx)(R.a,{disabled:e.disabled,required:!0,name:"criterionName",className:t.input,label:"Crit\xe9rio",variant:"filled",value:o,onChange:l}),Object(C.jsxs)(q.a,{disabled:e.disabled,required:!0,className:t.formControl,variant:"filled",children:[Object(C.jsx)(M.a,{id:"label-type",children:"Tipo"}),Object(C.jsxs)(A.a,{labelId:"label-type",name:"type",value:m,onChange:l,children:[Object(C.jsx)(F.a,{value:1,children:"Custo"}),Object(C.jsx)(F.a,{value:2,children:"Benef\xedcio"})]})]}),Object(C.jsx)(R.a,{disabled:e.disabled,required:!0,className:t.input,type:"number",name:"weight",label:"Peso (%)",variant:"filled",value:u,onChange:l})]}),Object(C.jsx)(O.a,{disabled:e.disabled,className:t.button,type:"submit",onClick:function(t){t.preventDefault(),e.handleSubmit(c),s(a)},variant:"contained",color:"primary",children:" Adicionar "})]})}var G=t(113);function T(e){return Object(C.jsx)("div",{style:{width:"100%",height:300},children:Object(C.jsx)(G.a,{rows:e.dataset,columns:e.columns,pageSize:5,loading:e.loading})})}var P=Object(B.a)((function(e){return{formControl:{margin:e.spacing(0,1),minWidth:150},input:{minWidth:100,margin:e.spacing(0,1)},button:{margin:e.spacing(1,1,1,0)},form:{margin:e.spacing(2,0)}}})),W=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(e){return"."+e})).join(",");function E(e){var a={name:""};e.fields.forEach((function(e){a[e]=""}));var t=P(),i=Object(n.useState)(a),r=Object(j.a)(i,2),c=r[0],s=r[1],l=function(a){var t=a.target,n=t.name,i=t.value;if("file-input"===n){var r=a.target.files;r&&r[0]&&e.handleFile(r[0])}else s(Object(b.a)(Object(b.a)({},c),{},Object(k.a)({},n,i)))};return Object(C.jsxs)("form",{className:t.form,children:[Object(C.jsxs)(d.a,{display:"flex",flexDirection:"row",children:[Object(C.jsx)(R.a,{disabled:e.disabled,required:!0,name:"name",label:"Nome",variant:"filled",value:c.name,onChange:l}),e.fields.map((function(a,n){return Object(C.jsx)(R.a,{disabled:e.disabled,required:!0,className:t.input,type:"number",name:a,label:a,variant:"filled",value:c[a],onChange:l},n)}))]}),Object(C.jsx)(O.a,{disabled:e.disabled,className:t.button,type:"submit",onClick:function(t){t.preventDefault(),e.handleSubmit(c),s(a)},variant:"contained",color:"primary",children:" Adicionar "}),Object(C.jsx)("input",{className:t.input,style:{display:"none"},type:"file",id:"raised-button-file",name:"file-input",accept:W,onChange:l}),Object(C.jsx)("label",{htmlFor:"raised-button-file",children:Object(C.jsx)(O.a,{disabled:e.disabled,variant:"contained",component:"span",color:"secondary",className:t.button,children:"Carregar"})})]})}var z=t(115);function J(e,a){var t,n=a.map((function(e){return e.weight})),i=function(e){return e.reduce((function(e,a){return a+e}))},r=e.map((function(a){return a.map((function(a,t){return a/Math.sqrt(function(a){return i(e.map((function(e){return Math.pow(e[a],2)})))}(t))}))})).map((function(e){return e.map((function(e,a){return n[a]*e}))})),c=[],s=[],l=Object(z.a)(a);try{var o=function(){var e=t.value,n=r.map((function(t){return t[a.indexOf(e)]})),i=Math.min.apply(Math,Object(u.a)(n)),l=Math.max.apply(Math,Object(u.a)(n));c.push(1===e.type?i:l),s.push(1===e.type?l:i)};for(l.s();!(t=l.n()).done;)o()}catch(j){l.e(j)}finally{l.f()}var d=r.map((function(e){return Math.sqrt(i(e.map((function(e,a){return Math.pow(c[a]-e,2)}))))})),b=r.map((function(e){return Math.sqrt(i(e.map((function(e,a){return Math.pow(s[a]-e,2)}))))})).map((function(e,a){return e/(d[a]+e)}));return Object(u.a)(b).sort().reverse().map((function(e){return b.indexOf(e)}))}var _=[{field:"ranking",headerName:"#",type:"number",width:60},{field:"name",headerName:"Nome",width:160}];function U(e){var a=Object(n.useState)(!0),t=Object(j.a)(a,2),i=t[0],r=t[1],c=Object(n.useState)([]),s=Object(j.a)(c,2),l=s[0],o=s[1];return Object(n.useEffect)((function(){var a=e.criteria.map((function(e){return{name:e.criterionName,type:e.type,weight:parseFloat(e.weight/100)}})),t=J(e.dataset.map((function(e){return Object(u.a)(a.map((function(a){return e[a.name]})))})),a);setTimeout((function(){o(t.map((function(a,t){return{id:t,name:e.dataset[a].name,ranking:t+1}}))),r(!1)}),1e3)}),[]),Object(C.jsx)(T,{loading:i,dataset:l,columns:_})}var V=t(90),H=t.n(V);var K=Object(B.a)((function(e){return{root:{margin:e.spacing(6,0,3),width:"100%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));function L(e){var a=K(),t=Object(n.useState)({criteria:[],sum:0,disabledForm:!1,disableGrid:!0,disableResults:!0,dataset:[],loading:!1}),i=Object(j.a)(t,2),r=i[0],c=i[1],s=Object(n.useState)(0),l=Object(j.a)(s,2),p=l[0],x=l[1],g=["Insira os crit\xe9rios","Insira as alternativas","Veja o resulado"],v=function(e){var a=r.sum+parseInt(e.weight);c(Object(b.a)(Object(b.a)({},r),{},{criteria:[].concat(Object(u.a)(r.criteria),[Object(b.a)(Object(b.a)({},e),{},{weight:parseInt(e.weight)})]),sum:a,disabledForm:a>=100,disableGrid:!1}))},y=function(e,a){var t=Object(b.a)({},e);return t.name=t.Nome,delete t.Nome,Object(b.a)(Object(b.a)({},t),{},{name:t.name,id:a+r.dataset.length})},w=function(e){c(Object(b.a)(Object(b.a)({},r),{},{dataset:[].concat(Object(u.a)(r.dataset),[Object(b.a)(Object(b.a)({},e),{},{id:r.dataset.length})]),disableResults:!1}))},N=function(e){c(Object(b.a)(Object(b.a)({},r),{},{loading:!0}));var a=new FileReader,t=!!a.readAsBinaryString;a.onload=function(e){var a=e.target.result,n=H.a.read(a,{type:t?"binary":"array"}),i=n.SheetNames[0],s=n.Sheets[i],l=H.a.utils.sheet_to_json(s,{header:0});console.log(l.map(y)),c(Object(b.a)(Object(b.a)({},r),{},{dataset:l.map(y),disableResults:!1,loading:!1}))},t?a.readAsBinaryString(e):a.readAsArrayBuffer(e)};var k=function(e){var a=r.sum-parseInt(r.criteria[e].weight);c(Object(b.a)(Object(b.a)({},r),{},{criteria:Object(u.a)(r.criteria.filter((function(a,t){return t!==e}))),sum:a,disabledForm:a>=100,disableGrid:0===a}))};return Object(C.jsxs)(d.a,{className:a.root,children:[Object(C.jsx)(m.a,{activeStep:p,children:g.map((function(e,a){return Object(C.jsx)(h.a,Object(b.a)(Object(b.a)({},{}),{},{children:Object(C.jsx)(f.a,Object(b.a)(Object(b.a)({},{}),{},{children:e}))}),e)}))}),p===g.length?Object(C.jsxs)("div",{children:[Object(C.jsx)(o.a,{className:a.instructions,children:"Todas as etapas completadas"}),Object(C.jsx)(O.a,{onClick:function(){x(0)},className:a.button,children:"Reset"})]}):Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{children:function(e){switch(e){case 0:return Object(C.jsxs)(d.a,{children:[Object(C.jsx)(S,{rows:r.criteria,removeRow:k}),Object(C.jsx)(D,{disabled:r.disabledForm,handleSubmit:v})]});case 1:return Object(C.jsxs)(d.a,{children:[Object(C.jsx)(T,{dataset:r.dataset,disable:r.disableGrid,columns:(a=r.criteria,[{field:"name",headerName:"Nome",width:200}].concat(Object(u.a)(a.map((function(e){return{field:e.criterionName,headerName:[].concat(Object(u.a)(e.criterionName[0].toUpperCase()),[e.criterionName.slice(1)]),type:"number",width:160}}))))),loading:r.loading}),Object(C.jsx)(E,{fields:r.criteria.map((function(e){return e.criterionName})),disabled:r.disableGrid,handleSubmit:w,handleFile:N})]});case 2:return Object(C.jsx)(d.a,{children:Object(C.jsx)(U,{dataset:r.dataset,disable:r.disableResults,criteria:r.criteria})});default:return Object(C.jsx)(o.a,{children:"Etapa desconhecida"})}var a}(p)}),Object(C.jsxs)("div",{children:[Object(C.jsx)(O.a,{disabled:0===p,onClick:function(){x((function(e){return e-1}))},className:a.button,children:"Back"}),Object(C.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){x((function(e){return e+1}))},disabled:0==p&&r.disableGrid||1==p&&r.disableResults,className:a.button,children:p===g.length-1?"Finalizar":"Pr\xf3ximo"})]})]})]})}var Q=function(){return Object(C.jsx)(l.a,{maxWidth:"md",children:Object(C.jsxs)(d.a,{my:4,children:[Object(C.jsx)(o.a,{variant:"h4",component:"h1",children:"TOPSIS React"}),Object(C.jsx)(L,{})]})})},X=t(79),Y=t(46),Z=Object(Y.a)({palette:{primary:{main:"#2364AA"},secondary:{main:"#3DA5D9"},error:{main:X.a.A400},background:{default:"#fff"}}});r.a.render(Object(C.jsxs)(c.a,{theme:Z,children:[Object(C.jsx)(s.a,{}),Object(C.jsx)(Q,{})]}),document.querySelector("#root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.d2547308.chunk.js.map